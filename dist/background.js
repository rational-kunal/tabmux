parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"bEr1":[function(require,module,exports) {
let e={currentSessionName:null,sessions:[],tabs:[]};function s(s){e.tabs.push(s),console.info("new tab created",s)}function o(s){e.tabs=e.tabs.filter(e=>e.id!==s),console.info("tab removed",s)}function n(s,o,n){e.tabs=e.tabs.map(e=>e.id===s?n:e),console.info("tab updated",n)}function t(s){chrome.tabs.query({},e=>{e.forEach(e=>chrome.tabs.remove(e.id)),console.info("removed existing tabs",e)}),e.tabs=s.tabs,e.tabs.forEach(e=>{chrome.tabs.create({url:e.url})}),console.info("created session tabs",e.tabs)}function a(s){chrome.tabs.query({},s=>{e.tabs=s,console.info("added current tabs to session tabs",s)}),e.sessions.push(s)}function r(){e.sessions.forEach(s=>{s.name===e.currentSessionName&&(s.tabs=e.tabs)}),chrome.storage.local.set({sessions:e.sessions}),e.currentSessionName=null,e.tabs=[],chrome.tabs.query({},e=>{e.forEach(e=>chrome.tabs.remove(e.id)),console.info("removed existing tabs",e)}),chrome.tabs.create({})}chrome.storage.local.get(["sessions"],s=>{console.info("fetching data from storage",s),s.sessions&&(e.sessions=s.sessions)}),chrome.runtime.onMessage.addListener((c,i,m)=>{switch(c.actionType){case"START_SESSION":e.currentSessionName=c.sessionName;const i=e.sessions.filter(s=>s.name===e.currentSessionName);0===i.length?a({name:e.currentSessionName}):t(i[0]),chrome.tabs.onCreated.addListener(s),chrome.tabs.onUpdated.addListener(n),chrome.tabs.onRemoved.addListener(o),m(e),console.log(e);break;case"DETACH_SESSION":chrome.tabs.onCreated.removeListener(s),chrome.tabs.onUpdated.removeListener(n),chrome.tabs.onRemoved.removeListener(o),r(),m(e);break;case"FETCH_STATE":m(e)}});
},{}]},{},["bEr1"], null)
//# sourceMappingURL=background.js.map